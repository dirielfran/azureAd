# Server Configuration
server.port=8080
server.servlet.context-path=/api

# Application Configuration
spring.application.name=api-protegida-entra

# Microsoft Entra ID (Azure AD) Configuration
spring.cloud.azure.active-directory.enabled=${AZURE_AD_ENABLED:true}
spring.cloud.azure.active-directory.profile.tenant-id=f128ae87-3797-42d7-8490-82c6b570f832
spring.cloud.azure.active-directory.credential.client-id=4a12fbd8-bf63-4c12-be4c-9678b207fbe7
spring.cloud.azure.active-directory.credential.client-secret=wTu8Q~nC5v31H6fYqV8HKX9M3zIz1b.UQSt0hcr5
spring.cloud.azure.active-directory.app-id-uri=api://4a12fbd8-bf63-4c12-be4c-9678b207fbe7
spring.cloud.azure.active-directory.authorization-clients.angular-client.scopes=access_as_user

# Database Configuration (H2 for development)
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password

# H2 Console Configuration
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# JPA Configuration
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.jpa.defer-datasource-initialization=true
spring.jpa.properties.hibernate.format_sql=true

# SQL Initialization
spring.sql.init.mode=always
spring.sql.init.continue-on-error=true
spring.sql.init.data-locations=classpath:data.sql

# OAuth2 Resource Server Configuration
spring.security.oauth2.resourceserver.jwt.issuer-uri=https://login.microsoftonline.com/f128ae87-3797-42d7-8490-82c6b570f832/v2.0
spring.security.oauth2.resourceserver.jwt.audiences[0]=api://4a12fbd8-bf63-4c12-be4c-9678b207fbe7
spring.security.oauth2.resourceserver.jwt.audiences[1]=4a12fbd8-bf63-4c12-be4c-9678b207fbe7

# Logging Configuration
logging.level.com.example.apiprotegida=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# CORS Configuration
cors.allowed-origins=http://localhost:4200,https://localhost:4200
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=*
cors.allow-credentials=true

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always

# JWT Configuration (para autenticación local)
jwt.secret=mySecretKeyForJWTTokenGeneration123456789012345678901234567890
jwt.expiration=86400000
jwt.local.enabled=${JWT_LOCAL_ENABLED:true}

# Admin Token Configuration
admin.token=${ADMIN_TOKEN:ADMIN_SECRET_TOKEN_2024}

# Email Configuration (para recuperación de contraseña)
# Modo desarrollo: Si no se configura, los tokens se loguean en consola
# Para producción, configura tu servidor SMTP
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=ccscoffeeshopar@gmail.com
spring.mail.password=wtamefxdvrztwiin
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=10000
spring.mail.properties.mail.smtp.timeout=10000
spring.mail.properties.mail.smtp.writetimeout=10000
# Configurar el remitente explícitamente
spring.mail.properties.mail.smtp.from=ccscoffeeshopar@gmail.com

# URL de la aplicación (para links en emails)
app.url=${APP_URL:http://localhost:4200}

# Password Reset Configuration
password.reset.token.expiration.hours=1
password.reset.rate.limit.max=3
